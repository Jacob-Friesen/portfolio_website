(function(a,f){a.fn.menu_to_actions=function(b){var c=this;this.REPLACE="_grey";this.CACHE="cached_";this.menu_objects=[];this.settings={after_opening:null,map_imgs:{},menu_image_at:null};b&&a.extend(this.settings,b);this.add_menu_items=function(b,c,j){var h=this;this.each(function(i){var d=this;this.opened=!1;this.img=a(this).find(c)[0];var l=this.img.src.replace("http://"+window.location.hostname+"/","");this.set_gscale=function(b){function e(b){var d=a("#"+h.CACHE+l.split("_").shift()+b).clone(!0,
!0);d[0].style.display="inline";d[0].id=d[0].id.replace(h.CACHE,"")+b;c.replaceWith(d);this.img=d}var c=a(d.img),l=c.attr("src").split("/").pop();b?-1==c.attr("src").search(h.REPLACE)&&(e.call(this,h.REPLACE),this.opened=!1):e.call(this,"")};a(this).mouseenter(function(){d.set_gscale(!1)});a(this).parent().mouseleave(function(){!1===d.opened&&d.set_gscale(!0)});a(this).mouseleave(function(){!1===d.opened&&d.set_gscale(!0)});a(this).mouseup(function(){this.open()});this.open=function(a){h.all_to_grey();
try{b[l](this.img)}catch(d){b["http://"+Portfolio.location+"/"+l](this.img)}this.set_gscale(!1);this.opened=!0;a=!a?i:a;a=a>=f.length?"":f[a].toLowerCase();j(a)};h.menu_objects.push(this)})};this.all_to_grey=function(){for(var a=0;a<this.menu_objects.length;a++)this.menu_objects[a].set_gscale(!0)};this.set_open=function(b){var g=b,b=b>=f.length?0:b;a(c.menu_objects[b])[0].open(g)};this.add_menu_items(this.settings.map_imgs,this.settings.menu_image_at,this.settings.after_opening);return this}})(jQuery,
Portfolio.constants.pages);Portfolio.skills=function(a,f,b){return{init:function(){for(var c=b.attach_show_events({triggers:a("div[id^=skills_collapse_skill]:visible"),event:"click",collapsers:a("div[id^=collapse_points_skill]:visible"),delay:!1,on_show:function(c,e){a(e).show();a(c).parent().attr("class","skillsOpen");a("#skills_collapse_button_"+c.id.split("_").pop())[0].innerHTML=b.SHOW},on_hide:function(c,e){a(e).hide();a(c).parent().attr("class","skills");a("#skills_collapse_button_"+c.id.split("_").pop())[0].innerHTML=
b.HIDE}}),e=f.page_text.skills.skill_types,g=0;g<e.length;g++)b.attach_show_events({triggers:a("div[id^=skills_point_collapse_skill_"+g+"]:visible"),event:"click",collapsers:a("div[id^=collapse_point_points_skill_"+g+"]:visible"),delay:!1,parent:this,on_show:function(c,e){a(e).show();a(c).children("button")[0].innerHTML=b.SHOW},on_hide:function(c,e){a(e).hide();a(c).children("button")[0].innerHTML=b.HIDE}}).close("all");c.close("all").open(0)}}}(jQuery,Portfolio.constants,Portfolio.utility);Portfolio.experience=function(a,f){return{init:function(){for(var b=a(".jobTitle:visible"),c=0;c<b.length;c++)a("#job"+c+"jobText")[0]||(b.splice(c,1),c--);f.attach_show_events({triggers:b,event:"click",collapsers:a(".jobText:visible"),delay:!1,on_show:function(b,c){a(c).show();a(b).parent().attr("class","jobOpen");a("#job"+b.id[b.id.length-1]+"Clps")[0].innerHTML=f.SHOW},on_hide:function(b,c){a(c).hide();a(b).parent().attr("class","job");a("#job"+b.id[b.id.length-1]+"Clps")[0].innerHTML=f.HIDE}}).close("all").open(0)}}}(jQuery,
Portfolio.utility);Portfolio.demos=function(a,f){return{init:function(){f.attach_show_events({triggers:a('div[id^="demo_"]:visible'),event:"click",collapsers:a('div[id^="demolinks_"]:visible'),delay:!1,on_show:function(b,c){a(c).show();a(b).parent().attr("class","demoPaneOpen");a("#demo"+b.id[b.id.length-1]+"Clps")[0].innerHTML=f.SHOW},on_hide:function(b,c){a(c).hide();a(b).parent().attr("class","demoPane");a("#demo"+b.id[b.id.length-1]+"Clps")[0].innerHTML=f.HIDE}}).close("all").open(0)},resize_img:function(b){b=a("<img/>").attr("src",
b.src.replace("_s","")).attr("id",b.id+"_clone");b.lightbox_me({destroyOnClose:!0,centered:!0});b.click(function(){a(this).trigger("close")})}}}(jQuery,Portfolio.utility);Portfolio.location=window.location.hostname;
Portfolio.start_system=function(a,f,b,c,e,g){function j(a,b){d=!d?b:d;switch(a){case "home":d(0);break;case "skills":d(1);break;case "experience":d(2);break;case "demos":d(3);break;case "blog":d(4);break;case "":d(5);break;default:d(0)}}var h=!0,i=!1;History.Adapter.bind(a,"statechange",function(){var a=History.getState().url.split("/").pop();b.is_forward(a)?a=j(b.go_forward()):b.is_backward(a)&&(a=b.go_back(a),i=b.is_first());a&&j(a)});var d=null;return function(){b=Portfolio.page_history;c=Portfolio.pages;
e=Portfolio.window_details;""!=a.location.port&&(g+=":"+a.location.port);var d={},k=["/images/menu_icons/home_page_grey.png","/images/menu_icons/skills_page_grey.png","/images/menu_icons/experience_page_grey.png","/images/menu_icons/demos_page_grey.png","/images/menu_icons/blog_page_grey.png"];d["http://"+g+k[0]]=function(a){e.open_item(a,c.init_home)};d["http://"+g+k[1]]=function(a){e.open_item(a,c.init_skills)};d["http://"+g+k[2]]=function(a){e.open_item(a,c.init_exp)};d["http://"+g+k[3]]=function(a){e.open_item(a,
c.init_demos)};d["http://"+g+k[4]]=function(a){e.open_item(a,c.init_blog)};d=f(".icbm_object").menu_to_actions({after_opening:function(a){i?i=!1:(b.add(a),h||c.update_url(a),h=!1)},map_imgs:d,menu_image_at:".icbm_image"});k=1<(a.location+"").split("#").length?(a.location+"").split("#").pop():a.location.pathname.replace("/","").replace("#","");j(k,d.set_open)}}(window,jQuery,Portfolio.page_history,Portfolio.pages,Portfolio.window_details,Portfolio.location);
Portfolio.pages=function(a,f,b,c,e,g,j,h){function i(){a("img").each(function(){-1==a(this).attr("class").search("icbm_image")&&("mainImg"!=a(this)[0].id&&"link"!=a(this).attr("class"))&&(a(h).off("mousedown","#"+this.id),a(h).on("mousedown","#"+this.id,function(a){"hMainPicture"===a.target.id?g.resize_img(a.target.childNodes[1]):g.resize_img(a.target)}))})}return{init_home:function(){i();a(".mainImage").each(function(b,c){a(c).attr("src",a("#mainImg").attr("src").replace("_s",""))})},init_skills:function(){i();
c.init()},init_exp:function(){i();e.init()},init_demos:function(){i();g.init()},init_blog:function(){i();j.init()},update_url:function(a){var c=a,a=""===a?"home":a;f.History.pushState(b.page_text[a].title+a+" page",b.page_text[a].title,"/"+c)}}}(jQuery,window,Portfolio.constants,Portfolio.skills,Portfolio.experience,Portfolio.demos,Portfolio.blog,window.document);Portfolio.window_details=function(a,f){return{menu_list:{},PAGE_INTO:"window",open_item:function(b,c){var e=a(b).attr("src");if(!this.menu_list[e]){var g=this.menu_list,j;j={child:null,item_id:a(b).attr("id").split("_").shift(),into:a("#"+this.PAGE_INTO),open_obj:function(){var b=a("#"+this.item_id+"_cache");null==b[0]?a.ajax({type:"GET",url:this.item_id+f.mode_to_get(),context:this,success:this.render_page}):this.render_page(b[0].innerHTML,!0)},render_page:function(a,b){!0!==b&&f.add_cache(this.item_id,
a);this.into[0].innerHTML=a;this.child=this.into.children(":first")[0];this.child.style.display="inline";if(null===c)throw"Error: exec_after must be specified";c()}};g[e]=j}this.menu_list[e].open_obj();e.split("/").pop().split("_");return this}}}(jQuery,Portfolio.selector,Portfolio.pages,navigator);
