Portfolio.MenuImages=function(){var a=this;this.images=[];this.add=function(b){a.images.push(b);return b};this.setAllGreyExcept=function(b){_.forEach(a.images,function(d,c){d.setBackground(d.page===b)})};return this};Portfolio.menuImages=new Portfolio.MenuImages();Portfolio.app.directive("menuImage",["$interpolate",function(d){var c="<a class='menuLink' href='{{page.toLowerCase()}}'><div class='{{page.toLowerCase()}}-button'></div><h2>{{page}}</h2>";"</a>";var a=function(f,g,e){g[0].className="";if(!e){g[0].className=f+"-button"}else{g[0].className=f+"-button-selected"}e=!e};var b=null;return{restrict:"E",replace:true,link:function(h,g,f){var k=angular.element(d(c)(h));g.replaceWith(k);var i=h.page.toLowerCase(),j=k.find("div"),e=true;Portfolio.menuImages.add({setBackground:function(l){a(i,j,(l!==undefined)?l:e)},page:i});k.bind("click",function(l){a(i,j,e)})}}}]);Portfolio.OpenableArray=function(){var a=[];a.closeAllExcept=function(b){_.each(this,function(d,c){if(c!==b){d("medium",true)}})};return a};Portfolio.app.directive("openable",function(){var a={};return function(h,f,d){var g=$(f).parent(),c=g.find("#"+d.hide),i=g.find("#"+d.icon),e=["+","-"];if(d.iconShapes){e=[d.iconShapes[0],d.iconShapes[1]]}c.hidden=false;if(d.openable!=="0"){b()}$(f).click(function(){if(c.hidden&&c.length>0){a[d.section].closeAllExcept(+d.openable)}b("medium")});if(a[d.section]===undefined){a[d.section]=new Portfolio.OpenableArray()}a[d.section].push(b);function b(k,j){if(j){i.html(e[0]);c.hide(k);c.hidden=true}else{if(i.length>0){i.html(e[+c.hidden])}c.toggle(k);c.hidden=!c.hidden}}}});Portfolio.app.directive("imgClickable",function(){return function(c,b,a){$(b).click(function(g){var f=$(g.target);var d=$("<img/>").attr("src",$(f).attr("src").replace("_s","")).attr("id",$(f).attr("id")+"_clone");d.lightbox_me({destroyOnClose:true,centered:true});d.click(function(){$(this).trigger("close")})})}});