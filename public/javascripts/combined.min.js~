// Jacob Friesen http://jacobfriesen.com/ MIT Licenced
var jf_util=(function(){return{}});var head=document.getElementsByTagName("head");Class.create(function Changable(){var b=null;var a=null;return{isDisplayed:null,currOrder:0,addElement:function(c){this.element=$("#"+c)[0];this.idName=c}}},this);Class.create(function ChangableList(b){if(b){var a=[];for(var c=0;c<b.length;c++){a[c]=new Changable();a[c].addElement(b[c]);a[c].isDisplayed=false}}return{changables:a,getItem:function(d){return this.changables[d]},getElement:function(d){return this.changables[d].element},getChangableFromId:function(e){for(var d=0;d<this.changables.length;d++){if(this.changables[d].element.id==e){return this.changables[d]}}return null}}},this);ChangableList.create(function MovableList(a){return{dispNum:0,confDisp:true,isSnappable:true,MOVE_BY:62,AS_CLOSE:35,SNAP_DIST:35,SNAP_CLOSE:10,displayObject:function(d){var b=this.getChangableFromId(d);if(this.dispNum==-1){this.confDisp=false}else{this.confDisp=true}if(b!=null&&b.isDisplayed==false){this.dispNum++;if(this.confDisp==true){b.element.style.display="inline";var c=$("#"+d+"Btn")[0];if(c!=null){c.className="clickedButton";decideColor(c)}putInFront(b.element);if(this.dispNum>0){this.shiftOthBoxes(b,b.element.style.top,b.element.style.left)}}b.isDisplayed=true}else{b.element.style.display="none";b.isDisplayed=false;var c=$("#"+d+"Btn")[0];if(c!=null){c.className="leftMenuButton";c.style.backgroundColor=""}this.dispNum--}},moveToMenu:function(b){b.element.style.left=(toNum(this.changables[0].element.style.left)+this.changables[0].element.offsetWidth-2+this.SNAP_CLOSE+2)+"px";b.element.style.top=this.changables[0].element.style.top;b.element.style.zIndex=1},shiftOthBoxes:function(b){b.currOrder=0;var e=-1;var c=-1;var d;for(var f=1;f<this.changables.length;f++){d=this.changables[f].element.style;if(b.element.id!=this.changables[f].element.id){e=Math.abs(toNum(b.element.style.top)-toNum(d.top));c=Math.abs(toNum(b.element.style.left)-toNum(d.left));if(e<this.AS_CLOSE&&c<this.AS_CLOSE&&this.changables[f].isDisplayed){toTop=toNum(d.top)-this.MOVE_BY;if(toTop>0){d.top=(toNum(d.top)-this.MOVE_BY)+"px"}else{d.left=(toNum(d.left)+this.MOVE_BY)+"px"}this.shiftOthBoxes(this.changables[f]);break}}}},snapWindow:function(d,i,h,f,b){var c;var e;if(this.isSnappable==true){for(var g=0;g<this.changables.length;g++){if(this.changables[g].isDisplayed==true&&d.id!=this.changables[g].element.id){c=toNum(this.changables[g].element.style.left);e=toNum(this.changables[g].element.style.top);if(Math.abs(i-(c+this.changables[g].element.offsetWidth))<this.SNAP_DIST){d.style.left=(c+this.changables[g].element.offsetWidth+this.SNAP_CLOSE)+"px"}else{if(Math.abs((i+d.offsetWidth)-c)<this.SNAP_DIST){d.style.left=(c-f-this.SNAP_CLOSE)+"px"}else{if(Math.abs(h-(e+this.changables[g].element.offsetHeight))<this.SNAP_DIST){d.style.top=((e+this.changables[g].element.offsetHeight)+this.SNAP_CLOSE)+"px"}else{if(Math.abs((h+b)-e)<this.SNAP_DIST){d.style.top=(e-b-this.SNAP_CLOSE)+"px"}}}}}}}},displayAll:function(c){for(var b=1;b<this.changables.length;b++){if(this.changables[b].isDisplayed==c){this.displayObject(this.changables[b].element.id)}}},getIsSnappable:function(){return this.isSnappable},setIsSnappable:function(b){this.isSnappable=b}}},this);ChangableList.create(function HidableList(a){return{COLLAPSED:"Clps",text:null,extra:null,dispClass:null,innerHtmlE:null,innerHtmlC:null,setDisplay:function(f,c,d,e,b){this.text=f;this.dispClass=c;this.innerHtmlE=d;this.innerHtmlC=e;this.extra=b},closeDisplays:function(b){for(var c=0;c<this.changables.length;c++){this.changables[c].isDisplayed=true;if(c!=b){this.displayObject(this.changables[c].element.id)}}},displayObject:function(f){var c=this.getChangableFromId(f);if(c!=null){var d=$("#"+f+this.COLLAPSED)[0];var e=$("#"+f+this.text)[0];if(d==null){d=$("#"+f+this.extra)[0]}else{var b=$("#"+f+this.extra)[0]}if(c.isDisplayed==false){c.isDisplayed=true;if(this.dispClass!=null){c.element.className=this.dispClass}if(d!=null){d.innerHTML=this.innerHtmlC}if(e!=null){e.style.display="inline"}if(b!=null){b.style.display="inline"}}else{c.isDisplayed=false;if(this.dispClass!=null){c.element.className=this.dispClass+this.COLLAPSED}if(d!=null){d.innerHTML=this.innerHtmlE}if(e!=null){e.style.display="none"}if(b!=null){b.style.display="none"}}}}}},this);function toggleSmoothWindows(){if(movesPerDraw>0){movesPerDraw=0}else{movesPerDraw=8}}var ctrlDown=false;var maxZIndex=3;var movables;var itemsOut=false;var curObject=null;var mainMenu;var menuOpen=false;var MARGIN_LEFT=21;var homeWidth=700;var menuWidth=112;var attachMargin=12;$(document).keydown(function(){deRegisterMovables()});$(document).keyup(function(){registerMovables()});document.addEventListener("mouseup",function(){putInFront(curObject)},false);jQuery(document).ready(function(){var c=$().window_tiles({after:[function(){pages.init_home()},function(){pages.init_skills()},function(){pages.init_exp()},function(){pages.init_demos()},function(){pages.init_blog()}]});var f=(window.location.hostname+":"+window.location.port).replace(":80","");var a={};var e=["/images/menu_icons/home_page_grey.png","/images/menu_icons/skills_page_grey.png","/images/menu_icons/experience_page_grey.png","/images/menu_icons/demo_page_grey.png","/images/menu_icons/blog_page_grey.png"];for(var d=0;d<e.length;d++){a["http://"+f+e[d]]=function(){c.trigger_open(d)}}var b=$(document.body).icbm({map_imgs:a,z_index:3});b.set_open(0)});var pages=(function(){return{defaults:function(){$(":input[type=button]").each(function(){a(this)});$(":button").each(function(){a(this)});$("img").each(function(){if($(this).attr("class")!="icbm_image"&&$(this)[0].id!="mainImg"){a(this.parentNode);this.parentNode.addEventListener("mousedown",function(b){if(b.target.id=="hMainPicture"){demos_ns.resize_img(b.target.childNodes[1])}else{demos_ns.resize_img(b.target)}},true)}});function a(b){b.addEventListener("mousedown",function(c){deRegisterMovables()},true);b.addEventListener("mouseup",function(c){registerMovables()},true)}},init_home:function(){this.defaults();$(".mainImage").each(function(b,a){$(a).attr("src",$("#mainImg").attr("src").replace("_s",""))})},init_skills:function(){this.defaults();skills_ns.init()},init_exp:function(){this.defaults();exp_ns.init()},init_demos:function(){this.defaults();demos_ns.init()},init_blog:function(){this.defaults();blog_ns.init()}}})();var skills_ns=(function skills_ns(){var a;var e;var d;var c;var b;return{init:function(){var j=0;var i=["skill1","skill2","skill3","skill4"];var g=["_1Type1","_1Type2","_1Type3","_1Type4","_1Type5","_1Type6","_1Type7","_1Type8","_1Type9","_1Type10"];var f=["_2Type1","_2Type2","_2Type3","_2Type4","_2Type5"];var k=["_3Type1","_3Type2","_3Type3","_3Type4"];var h=["_4Type1","_4Type2","_4Type3","_4Type4"];a=new HidableList(i);a.setDisplay("skillText","skills","+","-");a.closeDisplays(0);e=new HidableList(g);e.setDisplay("",null,"+","-","Btn");e.closeDisplays(-1);d=new HidableList(f);d.setDisplay("",null,"+","-","Btn");d.closeDisplays(-1);c=new HidableList(k);c.setDisplay("",null,"+","-","Btn");c.closeDisplays(-1);b=new HidableList(h);b.setDisplay("",null,"+","-","Btn");b.closeDisplays(-1);this.skill_events()},skill_events:function(){var g=4;for(var f=0;f<=g;f++){$("#skill_"+f).click($.proxy(function(h){a.displayObject(h.target.id.replace("_",""))},this));$("#skill"+f+"Clps").click($.proxy(function(h){$("#skill_"+(h.target.id.replace("Clps","").substr(-1))).click()},this))}},type_events:function(g,f){switch(f){case 1:e.displayObject(g);break;case 2:d.displayObject(g);break;case 3:c.displayObject(g);break;case 4:b.displayObject(g);break}}}})();exp_ns=(function(){var a;return{init:function(){var b=["job1","job2","job3","job4"];a=new HidableList(b);a.setDisplay("jobText","job","+","-");a.closeDisplays(0)},job_events:function(b){a.displayObject(b)}}})();demos_ns=(function(){var a=[];var d;var c;var e;var b=false;return{init:function(){var f=["demo0","demo1","demo2","demo3","demo4","demo5"];a=HidableList(f);a.setDisplay("Downloads","demoPane","+","-","Links");a.closeDisplays(5)},demo_events:function(f){a.displayObject(f)},resize_img:function(k,i){$("#newBg").remove();if(i==null&&b){return false}var g=false;var j;var h;d=document.createElement("img");c=document.createElement("div");e=document.createElement("button");d.src=k.src.replace("_s","");d.className="viewImage";d.style.position="fixed";this.scale_img(d);if(d.width==0){b=true;c.id="newBg";c.className="viewBg";c.style.position="fixed";c.innerHTML='<h1 style="color: white;text-align:center;font-size: 80px">Loading Image...</h1>';document.body.appendChild(c);c.onclick=this.remove_resize;var f=this;setTimeout(function(){f.resize_img(k,true)},100);return false}j=document.documentElement.clientWidth-d.width;h=document.documentElement.clientHeight-d.height;d.style.marginLeft=(j*0.5)+"px";d.style.marginTop=(h*0.45)+"px";e.className="closeBtnNew";e.innerHTML="X";e.style.marginLeft=((j*0.5)+d.width-29)+"px";e.style.marginTop=((h*0.45)+5)+"px";e.style.position="fixed";c.id="newBg";c.className="viewBg";c.style.position="fixed";document.body.appendChild(d);document.body.appendChild(c);document.body.appendChild(e);c.onclick=this.remove_resize;e.onclick=this.remove_resize;d.onclick=this.remove_resize;b=false;return false},scale_img:function(g){var f=this.fits_in_win(g);g.width=(g.width*f);g.height=(g.height*f)-20},fits_in_win:function(g){var h=1;var i=document.documentElement.clientHeight;var f=document.documentElement.clientWidth;if(i-d.height<0){h=(i/d.height)}if(f-d.width<0){if(h>f/d.width){h=f/d.width}}return h},remove_resize:function(){registerMovables();document.body.removeChild(d);document.body.removeChild(c);document.body.removeChild(e)},display_flash:function(f){if(f==null){window.location="video.html"}else{window.location=f}}}})();blog_ns=(function(){var b=new Array();var a;return{init:function(){var d=["blog1_1"];var c=["blog2_1"];b=new HidableList(d);b.setDisplay("Txt",null,"+","-");blog2=new HidableList(c);blog2.setDisplay("Txt",null,"+","-");a=$("#monthMenuBlog")[0];this.blog_events()},blog_events:function(){$("#quickChooseBtn").click($.proxy(function(){this.open_quick_c()},this))},toggle_blog:function(c){switch(c.charAt(4)){case"1":b.displayObject(c);break;default:alert("error no second blog page")}},display_month:function(c){var d=$("#bTitleWrapper")[0];var e=$("#bTextWrapper")[0];d.innerHTML="<h1>Jacob Friesen's Blog: "+c.replace("_"," ")+"</h1>";e.innerHTML=readFile("blog/"+c+".html");b.closeDisplays(0)},open_quick_c:function(){if(a.style.display=="none"){a.style.display="inline"}else{a.style.display="none"}}}})();function removeFromPlacers(){if(itemsOut==false){var e=$("#centerInit")[0];var c=$("#page")[0];var d=movables.getChangableFromId("homeBox");var a=d.element.offsetHeight;c.removeChild(e);c.appendChild(movables.getElement(0));c.appendChild(movables.getElement(1));var b=window.innerWidth-(homeWidth+menuWidth+attachMargin);if(b>=0){b=b*0.506}else{b=0}movables.getElement(0).style.left=b+"px";movables.getElement(0).style.top=(window.innerWidth*0.04)+"px";movables.getElement(0).style.width=menuWidth+"px";movables.moveToMenu(movables.getItem(1));itemsOut=true}}function readFile(c){var b=new XMLHttpRequest();var a=c;b.open("GET",a,false);b.setRequestHeader("User-Agent",navigator.userAgent);b.send(null);return b.responseText}function openMenu(f){if(menuOpen==false){mainMenu.displayObject(f);var e=$("#"+f+"Main")[0];e.style.color="black";e.style.backgroundColor="white";maxZIndex++;e.style.zIndex=maxZIndex;var b=$("#"+f.slice(0,-1)+(Number(f.charAt(f.length-1))+1))[0];if(b!=null){var a=$("#"+f)[0];var d=$("#"+f+"Main")[0];var c=a.offsetWidth-d.offsetWidth;b.style.marginLeft=((-1*c)+MARGIN_LEFT+2)+"px"}}menuOpen=true}function closeMenu(a){if(menuOpen==true){mainMenu.displayObject(a);removeActive(a)}menuOpen=false}function removeActive(c){var b=$("#"+c+"Main")[0];b.style.color="white";b.style.backgroundColor="black";var a=$("#"+c.slice(0,-1)+(Number(c.charAt(c.length-1))+1))[0];if(a!=null){a.style.marginLeft=MARGIN_LEFT+"px"}}function displayObject(a){movables.displayObject(a)}function display_obj_in(b,a){movables.display_obj_in(b,a)}function openObject(a){if(movables.getChangableFromId(a).element.style.display!="none"){movables.displayObject(a)}movables.displayObject(a)}function displayAllPages(a){movables.displayAll(a)}function toggleSnappable(){if(movables.getIsSnappable()){movables.setIsSnappable(false)}else{movables.setIsSnappable(true)}}function registerMovables(){}function deRegisterMovables(){}function putInFront(a){if(a!=null){if(a.style.zIndex>998){subOrderings()}maxZIndex++;a.style.position="absolute";a.style.zIndex=maxZIndex;maxZIndex++;$("#rolloutMenu").css("zIndex",maxZIndex)}}function subOrderings(){var a=$("#homeBox");a.style.zIndex=a.style.zIndex--;a=$("#demoBox");a.style.zIndex=a.style.zIndex--;a=$("#expBox");a.style.zIndex=a.style.zIndex--;a=$("#skillBox");a.style.zIndex=a.style.zIndex--;a=$("#blogBox");a.style.zIndex=a.style.zIndex--;a=$("#rolloutMenu");a.style.zIndex=a.style.zIndex--}function decideColor(a){switch(a.id){case"homeBoxBtn":a.style.backgroundColor="lightBlue";break;case"skillBoxBtn":a.style.backgroundColor="#C4B891";break;case"expBoxBtn":a.style.backgroundColor="#E5AB47";break;case"demoBoxBtn":a.style.backgroundColor="#98D398";break;case"blogBoxBtn":a.style.backgroundColor="#A05B5B";break}}function attachMenu(a,b){if(b!=null&&a!=null){b.style.top=a.style.top;b.style.left=(Number(a.style.left.slice(0,a.style.left.length-2))-Number(b.style.width.slice(0,b.style.width.length-2))-attachMargin)+"px"}}function toNum(a){return Number(a.slice(0,a.length-2))};
